import{S as H,i as P,s as U,C as _,D as b,m as p,o as m,E as h,F as S,n as R,e as I,t as ct,a as j,q as W,b as nt,x as $t,c as C,d as L,w as Ft,h as it,g as T,p as at,K as dt,L as pt,v as mt,G as z,H as Z,z as q,M as At}from"./vendor.svelte-248e27a6.js";import"./vendor.unzipit-73f5740a.js";import"./vendor.lz-string-35001fa0.js";import{C as A,d as E,l as M,c as gt,a as Y,b as J,m as ut,o as rt,S as st,p as ot,q as It,F as _t,U as Ot,L as Mt,r as K,e as wt}from"./lib-b0737c25.js";function Ht(o){let e,r;return e=new gt({props:{rows:o[2],twist:!1,showTotals:!0}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Pt(o){let e,r;return e=new A({props:{size:Ut,title:o[0],tds:o[1],$$slots:{default:[Ht]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const Ut=12;function Wt(o,e,r){let t;S(o,E,f=>r(3,t=f));const n=f=>new Date(f).toLocaleDateString("en-US",{month:"numeric",day:"numeric"}),s=["Driver/Day (Gas+WHI)","Scheduled in TMW"],i=t.OperationsV1,l=i.DriverCountPerDayV1,c=new Date(i.tds),u=l.map(f=>({Terminal:f.Terminal,[n(c)]:f["Day 0"]??f.Current,[n(M(c,1))]:f["Day +1"],[n(M(c,2))]:f["Day +2"],[n(M(c,3))]:f["Day +3"],[n(M(c,4))]:f["Day +4"],[n(M(c,5))]:f["Day +5"],[n(M(c,6))]:f["Day +6"],[n(M(c,7))]:f["Day +7"],[n(M(c,8))]:f["Day +8"],[n(M(c,9))]:f["Day +9"],[n(M(c,10))]:f["Day +10"]}));return[s,c,u]}class Rt extends H{constructor(e){super(),P(this,e,Wt,Pt,U,{})}}function yt(o){let e;function r(s,a){return s[3]?qt:Gt}let n=r(o)(o);return{c(){n.c(),e=W()},m(s,a){n.m(s,a),C(s,e,a)},p(s,a){n.p(s,a)},d(s){s&&T(e),n.d(s)}}}function Gt(o){let e;return{c(){e=I("tr"),e.innerHTML='<td></td> <td class="text-center" colspan="4">No impacted customers.</td>',nt(e,"class","text-end align-text-top alert-success")},m(r,t){C(r,e,t)},p:R,d(r){r&&T(e)}}}function qt(o){let e,r,t,n,s=o[5](o[0][5])+"",a,i,l=o[5](o[0][6])+"",c,u,f=o[5](o[0][7])+"",d,g,y=o[5](o[0][8])+"";return{c(){e=I("tr"),r=I("td"),r.textContent="Impacted:",t=j(),n=I("td"),a=j(),i=I("td"),c=j(),u=I("td"),d=j(),g=I("td"),nt(e,"class","text-end align-text-top alert-warning")},m($,w){C($,e,w),L(e,r),L(e,t),L(e,n),n.innerHTML=s,L(e,a),L(e,i),i.innerHTML=l,L(e,c),L(e,u),u.innerHTML=f,L(e,d),L(e,g),g.innerHTML=y},p($,w){w&1&&s!==(s=$[5]($[0][5])+"")&&(n.innerHTML=s),w&1&&l!==(l=$[5]($[0][6])+"")&&(i.innerHTML=l),w&1&&f!==(f=$[5]($[0][7])+"")&&(u.innerHTML=f),w&1&&y!==(y=$[5]($[0][8])+"")&&(g.innerHTML=y)},d($){$&&T(e)}}}function Et(o){let e,r,t=o[0][0]+"",n,s,a,i=o[4](o[0][1])+"",l,c,u,f=o[4](o[0][2])+"",d,g,y,$=o[4](o[0][3])+"",w,D,v,O=o[4](o[0][4])+"",X,G,Q,x,lt,B=o[2]&&yt(o);return{c(){e=I("tr"),r=I("td"),n=ct(t),s=j(),a=I("td"),l=ct(i),c=j(),u=I("td"),d=ct(f),g=j(),y=I("td"),w=ct($),D=j(),v=I("td"),X=ct(O),G=j(),B&&B.c(),Q=W(),nt(r,"class","text-start"),$t(r,"border",o[2]&&!o[1]),nt(e,"class","text-end"),$t(e,"table-dark",o[1])},m(V,N){C(V,e,N),L(e,r),L(r,n),L(e,s),L(e,a),L(a,l),L(e,c),L(e,u),L(u,d),L(e,g),L(e,y),L(y,w),L(e,D),L(e,v),L(v,X),C(V,G,N),B&&B.m(V,N),C(V,Q,N),x||(lt=Ft(e,"click",o[6]),x=!0)},p(V,[N]){N&1&&t!==(t=V[0][0]+"")&&it(n,t),N&6&&$t(r,"border",V[2]&&!V[1]),N&1&&i!==(i=V[4](V[0][1])+"")&&it(l,i),N&1&&f!==(f=V[4](V[0][2])+"")&&it(d,f),N&1&&$!==($=V[4](V[0][3])+"")&&it(w,$),N&1&&O!==(O=V[4](V[0][4])+"")&&it(X,O),N&2&&$t(e,"table-dark",V[1]),V[2]?B?B.p(V,N):(B=yt(V),B.c(),B.m(Q.parentNode,Q)):B&&(B.d(1),B=null)},i:R,o:R,d(V){V&&(T(e),T(G),T(Q)),B&&B.d(V),x=!1,lt()}}}function Kt(o,e,r){let{row:t}=e,{totalrow:n=!1}=e,s=Object.values(t).slice(1,5).reduce((u,f)=>u+f)!==0,a=!1;const i=u=>u===0?"":u,l=u=>u.split(",").sort().join("<br />"),c=()=>{r(2,a=!a)};return o.$$set=u=>{"row"in u&&r(0,t=u.row),"totalrow"in u&&r(1,n=u.totalrow)},[t,n,a,s,i,l,c]}class zt extends H{constructor(e){super(),P(this,e,Kt,Et,U,{row:0,totalrow:1})}}function Zt(o){let e,r;return e=new zt({props:{row:o[0],totalrow:!0}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Yt(o,e,r){let{rows:t}=e;const n=(i,l)=>i.map(c=>Object.values(c)).map(c=>c[l]).reduce((c,u)=>c+u),s=(i,l)=>[...new Set(i.map(c=>Object.values(c)).map(c=>c[l]).filter(c=>c!=="").map(c=>c.split(",")).join(",").split(","))].join(","),a=["Total",n(t,1),n(t,2),n(t,3),n(t,4),s(t,5),s(t,6),s(t,7),s(t,8)];return o.$$set=i=>{"rows"in i&&r(1,t=i.rows)},[a,t]}class Jt extends H{constructor(e){super(),P(this,e,Yt,Zt,U,{rows:1})}}function Dt(o,e,r){const t=o.slice();return t[7]=e[r],t[9]=r,t}function Ct(o){let e,r;return e=new zt({props:{row:o[7]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Qt(o){let e,r,t,n,s,a,i,l,c=at(o[1].map(o[3])),u=[];for(let d=0;d<c.length;d+=1)u[d]=Ct(Dt(o,c,d));const f=d=>m(u[d],1,1,()=>{u[d]=null});return i=new Jt({props:{rows:o[1]}}),{c(){e=I("div"),r=I("table"),t=I("thead"),t.innerHTML='<tr class="text-end table-light"><th width="20%" class="text-start">Terminal</th> <th width="20%">Current</th> <th width="20%">Day -1</th> <th width="20%">Day -2</th> <th width="20%">Day -3</th></tr>',n=j(),s=I("tbody");for(let d=0;d<u.length;d+=1)u[d].c();a=j(),_(i.$$.fragment),nt(r,"class","table table-hover table-borderless table-sm align-middle"),nt(e,"class","table-responsive m-0 mt-2 m-lg-4 p-1")},m(d,g){C(d,e,g),L(e,r),L(r,t),L(r,n),L(r,s);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(s,null);L(s,a),b(i,s,null),l=!0},p(d,g){if(g&2){c=at(d[1].map(d[3]));let y;for(y=0;y<c.length;y+=1){const $=Dt(d,c,y);u[y]?(u[y].p($,g),p(u[y],1)):(u[y]=Ct($),u[y].c(),p(u[y],1),u[y].m(s,a))}for(dt(),y=c.length;y<u.length;y+=1)f(y);pt()}},i(d){if(!l){for(let g=0;g<c.length;g+=1)p(u[g]);p(i.$$.fragment,d),l=!0}},o(d){u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)m(u[g]);m(i.$$.fragment,d),l=!1},d(d){d&&T(e),mt(u,d),h(i)}}}function Xt(o){let e,r;return e=new A({props:{size:xt,title:o[0],tds:o[2],$$slots:{default:[Qt]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1024&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const xt=12;function te(o,e,r){let t;S(o,E,u=>r(4,t=u));const n=["Low Level Alarms","BSTK < 12"],a=t.OperationsV1,i=a.RunoutsPerDayV1,l=a.tds;return[n,i,l,u=>Object.values(u)]}class ee extends H{constructor(e){super(),P(this,e,te,Xt,U,{})}}const ne=o=>new Date(o).toLocaleDateString("en-US",{month:"numeric",day:"numeric"}),re=new Intl.NumberFormat("en-US",{style:"decimal",signDisplay:"exceptZero"}),se=(o,e,r)=>{const t=[0,6].includes(M(e,r).getDay()),n=o[t?"S+S":"M-F"],s=(o[`Day ${re.format(r)}`]*o.ALC).toFixed(0);return{cellclass:`text-light bg-${s>=n?"success":"danger"}`,cellvalue:s}},oe=async o=>{const r=o.OperationsV1,t=r.DriverCountPerDayV1,n=r.LoadHistoryV1,s=r.TargetsV1,a=n.map(c=>c.Terminal),i=new Date(r.tds);return t.filter(c=>a.includes(c.Terminal)).map(c=>({...c,...n.find(u=>u.Terminal===c.Terminal),...s.find(u=>u.Terminal===c.Terminal)})).map(c=>({Terminal:c.Terminal,...[...Array(10).keys()].reduce((u,f)=>(u[ne(M(i,f))]=se(c,i,f),u),{}),"M-F":c["M-F"],"S+S":c["S+S"]}))};function ae(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function le(o){let e,r;return e=new gt({props:{rows:o[5],twist:!1,showTotals:!0}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.rows=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ce(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ie(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:ce,then:le,catch:ae,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function ue(o){let e,r;return e=new A({props:{size:fe,title:o[3],tds:o[0],$$slots:{default:[ie]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const fe=12;function $e(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["Load Forecast vs Targets (Gas)","Using 6 Wk ALC + Driver/Day"],async l=>{const u=l.OperationsV1,f=await oe(l);return s.set(u.tds),f}]}class de extends H{constructor(e){super(),P(this,e,$e,ue,U,{})}}Date.prototype.addDays=function(o){var e=new Date(this.valueOf());return e.setDate(e.getDate()+o),e};const tt=o=>new Date(o).toLocaleDateString("en-US",{month:"numeric",day:"numeric"}),et=(o,e)=>{var i;const r=o.ALC*(((i=o.DriverCountPerDay)==null?void 0:i[`Day -${e}`])??0),t=o[`Day -${e}`],n=t-r,s=t.toFixed(0),a=new Intl.NumberFormat("en-US",{signDisplay:"exceptZero"}).format(n.toFixed(0));return{cellclass:`text-light bg-${a<0?"danger":"success"}`,cellvalue:`${s}(${a})`}},pe=async o=>{const r=o.OperationsV1,t=r.LoadHistoryV1,n=r.DriverCountPerDayV1,s=n.map(l=>l.Terminal),a=new Date(r.tds);return t.filter(l=>s.includes(l.Terminal)).map(l=>({...l,DriverCountPerDay:n.find(c=>c.Terminal===l.Terminal)})).map(l=>({Terminal:l.Terminal,[tt(M(a,-1))]:et(l,1),[tt(M(a,-2))]:et(l,2),[tt(M(a,-3))]:et(l,3),[tt(M(a,-4))]:et(l,4),[tt(M(a,-5))]:et(l,5),[tt(M(a,-6))]:et(l,6),[tt(M(a,-7))]:et(l,7),[tt(M(a,-8))]:et(l,8),[tt(M(a,-9))]:et(l,9),[tt(M(a,-10))]:et(l,10),"M-F":l["M-F"].toFixed(0),"S+S":l["S+S"].toFixed(0),ALC:l.ALC.toFixed(1)}))};function me(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ge(o){let e,r;return e=new gt({props:{rows:o[5],twist:!1,showTotals:!0,showVariance:!0}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.rows=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function _e(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function be(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:_e,then:ge,catch:me,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function he(o){let e,r;return e=new A({props:{size:ke,title:o[3],tds:o[0],$$slots:{default:[be]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const ke=12;function we(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["Load History vs Forecast (Gas)","Daily Actuals + 6 Wk Avgs"],async l=>{const u=l.OperationsV1,f=await pe(l);return s.set(u.tds),f}]}class ye extends H{constructor(e){super(),P(this,e,we,he,U,{})}}const De=o=>{const e=o.getDate()-o.getDay()+1;return new Date(o.setDate(e))},Ce=async o=>{const r=o.OperationsV1,t=r.tds,n=r.AtoV1,s=[...new Set(n.map(g=>g.Terminal))],a=De(new Date(t)),l=[0,1,2,3,4,5].map(g=>M(a,7*g)).map(g=>new Date(g).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})),c=rt();c.layout.padding.top=50,c.scales.y.display=!1,c.scales.x.stacked=!0,c.scales.y.stacked=!0,c.plugins.tooltip.displayColors=!0,c.scales.y.suggestedMax=15,c.plugins.tooltip.callbacks.label=g=>g.parsed.y===0?"":g.dataset.label+": "+g.parsed.y,c.plugins.tooltip.callbacks.footer=g=>["Total: "+g.reduce(($,w)=>$+w.raw,0)],c.plugins.tooltip.footerColor="#858796";const u=s.map((g,y)=>({label:g,backgroundColor:ut[y*3]??ut[y],data:[0,1,2,3,4,5].map($=>{var w;return((w=n.find(D=>D.Terminal===g&&D.WD===$))==null?void 0:w.Cnt)??0})}));return{type:"bar",data:{labels:l,datasets:u},options:c,plugins:[st]}};function Te(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ve(o){let e,r;return e=new ot({props:{config:o[5]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.config=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Le(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function je(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Le,then:ve,catch:Te,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function Se(o){let e,r;return e=new A({props:{size:Ve,title:o[3],tds:o[0],$$slots:{default:[je]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const Ve=6;function Fe(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["ATO - 6 Week Schedule","Shift Status ATO in TMW"],async l=>{const u=l.OperationsV1,f=await Ce(l);return s.set(u.tds),f}]}class Oe extends H{constructor(e){super(),P(this,e,Fe,Se,U,{})}}const Me=async o=>{const t=o.OperationsV1.AvgDailyLoadsV2,n=Object.keys(t[0]).filter((c,u)=>u>0).map(c=>It[c.split("-")[1]-1]),s=rt();s.layout.padding.top=50,s.scales.y.display=!1,s.scales.x.stacked=!0,s.scales.y.stacked=!0,s.plugins.tooltip.displayColors=!0,s.plugins.tooltip.callbacks.label=c=>`${c.dataset.label}: ${c.parsed.y}`,s.plugins.tooltip.callbacks.footer=c=>["Total: "+c.reduce((f,d)=>f+d.raw,0)],s.plugins.tooltip.footerColor="#858796";const a=t.map((c,u)=>{const{CAT:f,...d}=c;return{label:f,backgroundColor:_t[f],data:Object.values(d)}});return{type:"bar",data:{labels:n,datasets:a},options:s,plugins:[st]}};function ze(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Be(o){let e,r;return e=new ot({props:{config:o[5]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.config=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Ne(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Ae(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Ne,then:Be,catch:ze,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function Ie(o){let e,r;return e=new A({props:{size:He,title:o[3],tds:o[0],$$slots:{default:[Ae]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const He=6;function Pe(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["μ Loads/Day","CFY by Month"],async l=>{const u=l.OperationsV1,f=await Me(l);return s.set(u.tds),f}]}class Ue extends H{constructor(e){super(),P(this,e,Pe,Ie,U,{})}}const We=async o=>{const r=o.OperationsV1,t=r.DriversByFleetByTerminalV1,n=r.ICDriversByTerminalV1,s=[...new Set(t.map(d=>d.Terminal))].sort(),a=[...new Set(t.map(d=>d.Fleet))].sort(),i=s,l=rt();l.scales.x.ticks.maxTicksLimit=100,l.layout.padding.top=50,l.scales.y.display=!1,l.scales.x.stacked=!0,l.scales.y.stacked=!0,l.plugins.tooltip.displayColors=!0,l.plugins.tooltip.callbacks.label=d=>`${d.dataset.label}: ${d.parsed.y}`,l.plugins.tooltip.callbacks.footer=d=>{let g=d.reduce((v,O)=>v+O.raw,0),y=d[0],$=y.chart.config._config.data,w=y.dataIndex,D=$.ICDrivers[w];return["Total: "+g,"","IC Drivers: "+D]},l.plugins.tooltip.footerColor="#858796";const c=a.map((d,g)=>({label:d,backgroundColor:_t[d],data:s.map(y=>t.filter($=>$.Terminal===y&&$.Fleet===d).reduce(($,w)=>$+w.Cnt,0))}));return{type:"bar",data:{labels:i,datasets:c,ICDrivers:s.map(d=>{var g;return((g=n.find(y=>y.Terminal===d))==null?void 0:g.Cnt)??0})},options:l,plugins:[st],total:t.reduce((d,g)=>d+g.Cnt,0)}};function Re(o){let e,r;return e=new Y({props:{error:o[7]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.error=t[7]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Ge(o){let e,r;return e=new ot({props:{config:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.config=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function qe(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Ee(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:qe,then:Ge,catch:Re,value:6,error:7,blocks:[,,,]};return z(r=o[5](o[2]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&4&&r!==(r=o[5](o[2]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function Ke(o){let e,r;return e=new A({props:{size:Ze,title:o[0],tds:o[1],$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.title=t[0]),n&2&&(s.tds=t[1]),n&260&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const Ze=12;function Ye(o,e,r){let t,n,s;S(o,E,c=>r(2,s=c));const a=q(new Date);S(o,a,c=>r(1,n=c));const i=q("Drivers/Fleet by Terminal");return S(o,i,c=>r(0,t=c)),[t,n,s,a,i,async c=>{const f=c.OperationsV1,d=await We(c);a.set(f.tds);const g=d.total;return g&&i.set([t,`Total: ${g}`]),d}]}class Je extends H{constructor(e){super(),P(this,e,Ye,Ke,U,{})}}const Qe=async o=>{const r=o.OperationsV1,t=r.TractorsV1,n=r.DriversByFleetByTerminalV1,s=r.ICDriversByTerminalV1,a=t.map(d=>d.Terminal),i=t.map(d=>d.Cnt),l=ut,u={labels:a,datasets:[{label:"Tractors",backgroundColor:l,borderColor:l,data:i}]},f=rt();return f.scales.x.ticks.maxTicksLimit=100,f.layout.padding.top=50,f.scales.y.display=!1,f.plugins.tooltip.displayColors=!0,f.scales.y.suggestedMax=15,f.plugins.tooltip.callbacks.label=d=>`${d.dataset.label}: ${d.parsed.y}`,f.plugins.tooltip.callbacks.footer=d=>{var G;let g=d[0],y=g.raw,$=g.label,w=g.chart.config._config,D=w.dc[$]??0,v=((G=w.ic.find(Q=>Q.Terminal===$))==null?void 0:G.Cnt)??0,O=D-v;return[`Drivers/Truck: ${(y===0||O===0?0:O/y).toFixed(2)}`]},f.plugins.tooltip.footerColor="#858796",{type:"bar",data:u,options:f,plugins:[st],dc:n.reduce((d,{Terminal:g,Cnt:y})=>(d[g]=(d[g]||0)+y)&&d,{}),ic:s}};function Xe(o){let e,r;return e=new Y({props:{error:o[7]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.error=t[7]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function xe(o){let e,r;return e=new ot({props:{config:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&4&&(s.config=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function tn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function en(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:tn,then:xe,catch:Xe,value:6,error:7,blocks:[,,,]};return z(r=o[5](o[2]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&4&&r!==(r=o[5](o[2]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function nn(o){let e,r;return e=new A({props:{size:rn,title:o[0],tds:o[1],$$slots:{default:[en]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.title=t[0]),n&2&&(s.tds=t[1]),n&260&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const rn=12;function sn(o,e,r){let t,n,s;S(o,E,c=>r(2,s=c));const a=q(new Date);S(o,a,c=>r(1,n=c));const i=q("Tractors/Terminal");return S(o,i,c=>r(0,t=c)),[t,n,s,a,i,async c=>{var y;const f=c.OperationsV1,d=await Qe(c);a.set(f.tds);const g=(y=d.data.datasets[0])==null?void 0:y.data.reduce(($,w)=>$+w);return g&&i.set([t,`Total: ${g}`]),d}]}class on extends H{constructor(e){super(),P(this,e,sn,nn,U,{})}}const an=o=>{const e=o.getDate()-o.getDay()+1;return new Date(o.setDate(e))},ln=async o=>{const r=o.OperationsV1,t=r.tds,n=r.LoadsByTypeV2,s=an(new Date(t)),i=[6,5,4,3,2,1].map(d=>M(s,-7*d)).map(d=>new Date(d).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})),l=rt();l.layout.padding.top=50,l.scales.y.display=!1,l.scales.x.stacked=!0,l.scales.y.stacked=!0,l.plugins.tooltip.displayColors=!0,l.plugins.tooltip.callbacks.label=d=>`${d.dataset.label}: ${d.parsed.y}`,l.plugins.tooltip.callbacks.footer=d=>["Total: "+d.reduce((y,$)=>y+$.raw,0)],l.plugins.tooltip.footerColor="#858796";const c=n.map(d=>({label:d.cat,backgroundColor:_t[d.cat],data:[6,5,4,3,2,1].map(g=>d[g])}));return{type:"bar",data:{labels:i,datasets:c},options:l,plugins:[st]}};function cn(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function un(o){let e,r;return e=new ot({props:{config:o[5]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.config=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function fn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function $n(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:fn,then:un,catch:cn,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function dn(o){let e,r;return e=new A({props:{size:pn,title:o[3],tds:o[0],$$slots:{default:[$n]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const pn=12;function mn(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["Loads/Type","6 Weeks"],async l=>{const u=l.OperationsV1,f=await ln(l);return s.set(u.tds),f}]}class gn extends H{constructor(e){super(),P(this,e,mn,dn,U,{})}}const _n=o=>new Date(o).toLocaleDateString("en-US",{month:"numeric",day:"numeric"}),bn=(o,e,r)=>{var u;const t=M(e,r).getDay(),n=Number(((u=o.Targets)==null?void 0:u.split(",")[t])??0),s=new Intl.NumberFormat("en-US",{style:"decimal",signDisplay:"exceptZero"}),a=o[`Day ${s.format(r)}`],i=a-n,l=a.toFixed(0),c=s.format(i.toFixed(0));return{cellclass:`text-light bg-${c<0?"danger":"success"}`,cellvalue:`${l}(${c})`}},hn=async o=>{const r=o.OperationsV1,t=r.LoadHistoryV1,n=r.DriverCountPerDayV1,s=r.TargetsV1,a=n.map(c=>c.Terminal),i=new Date(r.tds);return t.filter(c=>a.includes(c.Terminal)).map(c=>({...c,DriverCountPerDay:n.find(u=>u.Terminal===c.Terminal),...s.find(u=>u.Terminal===c.Terminal)})).map(c=>({Terminal:c.Terminal,...[...Array(10).keys()].reduce((u,f)=>(f=-(f+1),u[_n(M(i,f))]=bn(c,i,f),u),{})}))};function kn(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function wn(o){let e,r;return e=new gt({props:{rows:o[5],twist:!1,showTotals:!0,showVariance:!0}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.rows=t[5]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function yn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Dn(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:yn,then:wn,catch:kn,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function Cn(o){let e,r;return e=new A({props:{size:Tn,title:o[3],tds:o[0],$$slots:{default:[Dn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const Tn=12;function vn(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["Load History vs Targets (Gas)","Daily Actuals"],async l=>{const u=l.OperationsV1,f=await hn(l);return s.set(u.tds),f}]}class Ln extends H{constructor(e){super(),P(this,e,vn,Cn,U,{})}}const jn=async o=>{const t=o.OperationsV1.LoadsByBillToByTerminalV1,n=[...new Set(t.map($=>$.Terminal))].sort(),s=[...new Set(t.map($=>$.BillTo))].sort(),a=[...new Set(t.map($=>$.Date))].sort(),i=n,l=s.reduce(($,w,D)=>($[w]=Ot[D],$),{}),c=rt();c.scales.x.ticks.maxTicksLimit=100,c.layout.padding.top=50,c.scales.y.display=!1,c.scales.x.stacked=!0,c.scales.y.stacked=!0,c.plugins.tooltip.displayColors=!0,c.plugins.tooltip.callbacks.label=$=>$.parsed.y===0?"":$.dataset.label+": "+$.parsed.y,c.plugins.tooltip.callbacks.footer=$=>["Total: "+$.reduce((w,D)=>w+D.raw,0)],c.plugins.tooltip.footerColor="#858796";const u=($,w)=>n.map(D=>{var v;return((v=t.find(O=>O.Terminal===D&&O.BillTo===$&&O.Date===w))==null?void 0:v.Cnt)??0}),f=$=>s.map(w=>({label:w,backgroundColor:l[w],data:u(w,$)})),d=$=>[`Loads/BillTo by Terminal - ${new Date($).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})}`,`Total: ${t.filter(w=>w.Date===$).reduce((w,D)=>w+D.Cnt,0)}`],g=$=>({title:d($),type:"bar",options:c,plugins:[st],data:{labels:i,datasets:f($)}});return a.map($=>g($))};function Tt(o,e,r){const t=o.slice();return t[6]=e[r],t}function Sn(o){let e,r;return e=new A({props:{size:bt,title:o[3],tds:o[1],$$slots:{default:[Vn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&1025&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Vn(o){let e,r;return e=new Y({props:{error:o[9]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.error=t[9]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Fn(o){let e,r,t=at(o[5]),n=[];for(let a=0;a<t.length;a+=1)n[a]=vt(Tt(o,t,a));const s=a=>m(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=W()},m(a,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,i);C(a,e,i),r=!0},p(a,i){if(i&19){t=at(a[5]);let l;for(l=0;l<t.length;l+=1){const c=Tt(a,t,l);n[l]?(n[l].p(c,i),p(n[l],1)):(n[l]=vt(c),n[l].c(),p(n[l],1),n[l].m(e.parentNode,e))}for(dt(),l=t.length;l<n.length;l+=1)s(l);pt()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)p(n[i]);r=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)m(n[i]);r=!1},d(a){a&&T(e),mt(n,a)}}}function On(o){let e,r,t;return e=new ot({props:{config:o[6]}}),{c(){_(e.$$.fragment),r=j()},m(n,s){b(e,n,s),C(n,r,s),t=!0},p(n,s){const a={};s&1&&(a.config=n[6]),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&T(r),h(e,n)}}}function vt(o){let e,r;return e=new A({props:{size:bt,title:o[6].title,tds:o[1],$$slots:{default:[On]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.title=t[6].title),n&2&&(s.tds=t[1]),n&1025&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Mn(o){let e,r;return e=new A({props:{size:bt,title:o[3],tds:o[1],$$slots:{default:[zn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&1024&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function zn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Bn(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Mn,then:Fn,catch:Sn,value:5,error:9,blocks:[,,,]};return z(r=o[4](o[0]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,[a]){o=s,n.ctx=o,a&1&&r!==(r=o[4](o[0]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}const bt=12;function Nn(o,e,r){let t,n;S(o,E,l=>r(0,t=l));const s=q(new Date);S(o,s,l=>r(1,n=l));const a=q("Loads/BillTo by Terminal");return[t,n,s,a,async l=>{const u=l.OperationsV1,f=await jn(l);return s.set(u.tds),f}]}class An extends H{constructor(e){super(),P(this,e,Nn,Bn,U,{})}}const In=async o=>{const r=o.OperationsV1,t=r.tds,n=r.LoadChartsV2,s=[...new Set(n.map(c=>c.ChartName))],a=[...new Set(n.map(c=>c.Date))].sort(),i=a.map(c=>new Date(c).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})),l=rt();return l.scales.x.ticks.maxTicksLimit=100,l.layout.padding.top=50,l.scales.y.display=!1,l.scales.x.stacked=!0,l.scales.y.stacked=!0,l.plugins.tooltip.displayColors=!0,l.scales.y.suggestedMax=15,l.plugins.tooltip.itemSort=(c,u)=>u.datasetIndex-c.datasetIndex,l.plugins.tooltip.callbacks.label=c=>`${c.dataset.label}: ${c.parsed.y}`,l.plugins.tooltip.callbacks.footer=c=>["Total: "+c.reduce((f,d)=>f+d.raw,0)],l.plugins.tooltip.footerColor="#858796",s.sort((c,u)=>{var f=c.toUpperCase(),d=u.toUpperCase();return f>d?-1:f<d?1:0}).map(c=>{const u=/^dry/i.test(c)?[...new Set(n.filter(w=>/^dry/i.test(w.ChartName)).map(w=>w.Status))].sort((w,D)=>D.localeCompare(w)):["CMP","STD","DSP","PLN","AVL"],f=/^dry/i.test(c)?u.reduce((w,D,v)=>(w[D]=Ot[6+v*2],w),{}):Mt,d=u.map(w=>({label:w,backgroundColor:f[w],data:a.map(D=>{let v=n.filter(O=>O.ChartName===c&O.Status===w&O.Date===D);return v[0]?v[0].Loads:0})})),g={labels:i,datasets:d};let y=l;/^dry/i.test(c)&&(y.plugins.tooltip.callbacks.label=w=>w.parsed.y===0?null:`${w.dataset.label}: ${w.parsed.y}`);const $={type:"bar",data:g,options:y,plugins:[st]};return{chartID:"FirjacLastSevenDaysChart"+c,chartConfig:$,title:c,tds:t}})};function Lt(o,e,r){const t=o.slice();return t[5]=e[r],t}function Hn(o){let e,r;return e=new A({props:{size:ht,title:Bt,tds:o[1],$$slots:{default:[Pn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&513&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Pn(o){let e,r;return e=new Y({props:{error:o[8]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.error=t[8]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Un(o){let e,r,t=at(o[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=jt(Lt(o,t,a));const s=a=>m(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=W()},m(a,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,i);C(a,e,i),r=!0},p(a,i){if(i&11){t=at(a[4]);let l;for(l=0;l<t.length;l+=1){const c=Lt(a,t,l);n[l]?(n[l].p(c,i),p(n[l],1)):(n[l]=jt(c),n[l].c(),p(n[l],1),n[l].m(e.parentNode,e))}for(dt(),l=t.length;l<n.length;l+=1)s(l);pt()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)p(n[i]);r=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)m(n[i]);r=!1},d(a){a&&T(e),mt(n,a)}}}function Wn(o){let e,r,t;return e=new ot({props:{config:o[5].chartConfig}}),{c(){_(e.$$.fragment),r=j()},m(n,s){b(e,n,s),C(n,r,s),t=!0},p(n,s){const a={};s&1&&(a.config=n[5].chartConfig),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&T(r),h(e,n)}}}function jt(o){let e,r;return e=new A({props:{size:ht,title:o[5].title,tds:o[1],$$slots:{default:[Wn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.title=t[5].title),n&2&&(s.tds=t[1]),n&513&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Rn(o){let e,r;return e=new A({props:{size:ht,title:Bt,tds:o[1],$$slots:{default:[Gn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&512&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Gn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function qn(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Rn,then:Un,catch:Hn,value:4,error:8,blocks:[,,,]};return z(r=o[3](o[0]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,[a]){o=s,n.ctx=o,a&1&&r!==(r=o[3](o[0]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}const ht=6,Bt="Firjac - Last 10 Days";function En(o,e,r){let t,n;S(o,E,i=>r(0,t=i));const s=q(new Date);return S(o,s,i=>r(1,n=i)),[t,n,s,async i=>{const c=i.OperationsV1,u=await In(i);return s.set(c.tds),u}]}class Kn extends H{constructor(e){super(),P(this,e,En,qn,U,{})}}const Zn=async o=>{const r=o.OperationsV1,t=new Date(r.tds),n=r.MixLoadsV1;[...new Set(n.map($=>$.Terminal))];const s=[...Array(12).keys()].reverse(),a=s.map($=>$===0?"c":-$).map($=>`${$}`),l=s.map($=>K(t,-$)).map($=>new Date($).toLocaleDateString("en-US",{month:"short"})),c=$=>new Date($).toLocaleDateString("en-US",{month:"short"}),u=n.map($=>({Terminal:$.terminal,[c(K(t,-11))]:$[-11],[c(K(t,-10))]:$[-10],[c(K(t,-9))]:$[-9],[c(K(t,-8))]:$[-8],[c(K(t,-7))]:$[-7],[c(K(t,-6))]:$[-6],[c(K(t,-5))]:$[-5],[c(K(t,-4))]:$[-4],[c(K(t,-3))]:$[-3],[c(K(t,-2))]:$[-2],[c(K(t,-1))]:$[-1],[c(K(t,0))]:$.c})),f=rt();f.layout.padding.top=50,f.scales.y.display=!1,f.scales.x.stacked=!0,f.scales.y.stacked=!0,f.plugins.tooltip.displayColors=!0,f.scales.y.suggestedMax=15,f.plugins.tooltip.callbacks.label=$=>$.parsed.y===0?"":$.dataset.label+": "+$.parsed.y,f.plugins.tooltip.callbacks.footer=$=>["Total: "+$.reduce((D,v)=>D+v.raw,0)],f.plugins.tooltip.footerColor="#858796",f.scales.x.ticks.maxTicksLimit=null,f.plugins.legend.display=!0,f.plugins.legend.position="bottom";const d=n.map(($,w)=>({label:$.terminal,backgroundColor:ut[w]??ut[0],data:a.map(D=>$[D]??0)}));return{type:"bar",data:{labels:l,datasets:d},options:f,plugins:[st],rows:u}};function Yn(o){let e,r;return e=new Y({props:{error:o[6]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.error=t[6]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Jn(o){let e,r,t,n,s,a,i;return e=new ot({props:{config:o[5]}}),{c(){_(e.$$.fragment),r=j(),t=I("div"),n=I("button"),n.textContent="Download Data",nt(n,"type","button"),nt(n,"class","btn btn-outline-primary"),nt(t,"class","btn-group m-2"),nt(t,"role","group")},m(l,c){b(e,l,c),C(l,r,c),C(l,t,c),L(t,n),s=!0,a||(i=Ft(n,"click",function(){At(wt(o[5].rows,null,"Mix Loads Data"))&&wt(o[5].rows,null,"Mix Loads Data").apply(this,arguments)}),a=!0)},p(l,c){o=l;const u={};c&2&&(u.config=o[5]),e.$set(u)},i(l){s||(p(e.$$.fragment,l),s=!0)},o(l){m(e.$$.fragment,l),s=!1},d(l){l&&(T(r),T(t)),h(e,l),a=!1,i()}}}function Qn(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p:R,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function Xn(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:Qn,then:Jn,catch:Yn,value:5,error:6,blocks:[,,,]};return z(r=o[4](o[1]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,a){o=s,n.ctx=o,a&2&&r!==(r=o[4](o[1]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}function xn(o){let e,r;return e=new A({props:{size:tr,title:o[3],tds:o[0],$$slots:{default:[Xn]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,[n]){const s={};n&1&&(s.tds=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}const tr=12;function er(o,e,r){let t,n;S(o,E,l=>r(1,n=l));const s=q(new Date);return S(o,s,l=>r(0,t=l)),[t,n,s,["Mix Loads","12 Month"],async l=>{const u=l.OperationsV1,f=await Zn(l);return s.set(u.tds),f}]}class nr extends H{constructor(e){super(),P(this,e,er,xn,U,{})}}const rr=async o=>{const r=o.OperationsV1,t=r.tds,n=r.FirjacLoadsV1,s=r.FirjacFirstLoadsV1,a=[...new Set(n.map(f=>f.Terminal))],i=a.length%3===0?4:6,l=[...new Set(n.map(f=>f.Date))],c=l.map(f=>new Date(f).toLocaleDateString("en-US",{month:"numeric",day:"numeric"})),u=rt();return u.layout.padding.top=50,u.scales.y.display=!1,u.scales.x.stacked=!0,u.scales.y.stacked=!0,u.plugins.tooltip.displayColors=!0,u.scales.y.suggestedMax=15,u.plugins.tooltip.itemSort=(f,d)=>d.datasetIndex-f.datasetIndex,u.plugins.tooltip.callbacks.label=f=>`${f.dataset.label}: ${f.parsed.y}`,u.plugins.tooltip.callbacks.footer=f=>{let d=f.reduce((X,G)=>X+G.raw,0),g=f[0],y=g.chart.config._config.data,$=g.dataIndex,w=y.fcebydate[$],D=y.originalbydate[$],v=(w/d*100).toFixed(0),O=(isNaN(v)?0:v)+"%";return["Total: "+d,"FCE: "+O,"","Initial: "+D]},u.plugins.tooltip.footerColor="#858796",a.map(f=>{const d=["CMP","STD","DSP","PLN","AVL"].map($=>({label:$,backgroundColor:Mt[$],data:l.map(w=>{let D=n.filter(v=>v.Terminal===f&v.Status===$&v.Date===w);return D[0]?D[0].Loads:0})})),y={type:"bar",data:{labels:c,datasets:d,fcebydate:l.map($=>{let w=n.filter(D=>D.Terminal===f&D.Date===$);return w[0]?w.reduce((D,v)=>D+v.FCE,0):0}),originalbydate:l.map($=>{let w=s.find(D=>D.Terminal.substring(0,3)===f&D.Date.substring(0,10)===$);return w?w.Loads:0})},options:u,plugins:[st]};return{chartID:"FirjacLastSevenDaysChart"+f,chartConfig:y,size:i,title:f+" - Firjac - Last 10 Days",tds:t}})};function St(o,e,r){const t=o.slice();return t[5]=e[r],t}function sr(o){let e,r;return e=new A({props:{size:kt,title:Nt,tds:o[1],$$slots:{default:[or]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&513&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function or(o){let e,r;return e=new Y({props:{error:o[8]}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.error=t[8]),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ar(o){let e,r,t=at(o[4]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Vt(St(o,t,a));const s=a=>m(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=W()},m(a,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,i);C(a,e,i),r=!0},p(a,i){if(i&11){t=at(a[4]);let l;for(l=0;l<t.length;l+=1){const c=St(a,t,l);n[l]?(n[l].p(c,i),p(n[l],1)):(n[l]=Vt(c),n[l].c(),p(n[l],1),n[l].m(e.parentNode,e))}for(dt(),l=t.length;l<n.length;l+=1)s(l);pt()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)p(n[i]);r=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)m(n[i]);r=!1},d(a){a&&T(e),mt(n,a)}}}function lr(o){let e,r,t;return e=new ot({props:{config:o[5].chartConfig}}),{c(){_(e.$$.fragment),r=j()},m(n,s){b(e,n,s),C(n,r,s),t=!0},p(n,s){const a={};s&1&&(a.config=n[5].chartConfig),e.$set(a)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&T(r),h(e,n)}}}function Vt(o){let e,r;return e=new A({props:{size:kt,title:o[5].title,tds:o[1],$$slots:{default:[lr]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.title=t[5].title),n&2&&(s.tds=t[1]),n&513&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function cr(o){let e,r;return e=new A({props:{size:kt,title:Nt,tds:o[1],$$slots:{default:[ir]},$$scope:{ctx:o}}}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tds=t[1]),n&512&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ir(o){let e,r;return e=new J({}),{c(){_(e.$$.fragment)},m(t,n){b(e,t,n),r=!0},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ur(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:cr,then:ar,catch:sr,value:4,error:8,blocks:[,,,]};return z(r=o[3](o[0]),n),{c(){e=W(),n.block.c()},m(s,a){C(s,e,a),n.block.m(s,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(s,[a]){o=s,n.ctx=o,a&1&&r!==(r=o[3](o[0]))&&z(r,n)||Z(n,o,a)},i(s){t||(p(n.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const i=n.blocks[a];m(i)}t=!1},d(s){s&&T(e),n.block.d(s),n.token=null,n=null}}}const kt=6,Nt="Firjac - Last 10 Days";function fr(o,e,r){let t,n;S(o,E,i=>r(0,t=i));const s=q(new Date);return S(o,s,i=>r(1,n=i)),[t,n,s,async i=>{const c=i.OperationsV1,u=await rr(i);return s.set(c.tds),u}]}class $r extends H{constructor(e){super(),P(this,e,fr,ur,U,{})}}function dr(o){let e,r,t,n,s,a,i,l,c,u,f,d,g,y,$,w,D,v,O,X,G,Q,x,lt,B,V,N,ft;return e=new An({}),t=new Je({}),s=new on({}),i=new gn({}),c=new Ue({}),f=new Oe({}),g=new Rt({}),$=new de({}),D=new ye({}),O=new Ln({}),G=new ee({}),x=new Kn({}),B=new nr({}),N=new $r({}),{c(){_(e.$$.fragment),r=j(),_(t.$$.fragment),n=j(),_(s.$$.fragment),a=j(),_(i.$$.fragment),l=j(),_(c.$$.fragment),u=j(),_(f.$$.fragment),d=j(),_(g.$$.fragment),y=j(),_($.$$.fragment),w=j(),_(D.$$.fragment),v=j(),_(O.$$.fragment),X=j(),_(G.$$.fragment),Q=j(),_(x.$$.fragment),lt=j(),_(B.$$.fragment),V=j(),_(N.$$.fragment)},m(k,F){b(e,k,F),C(k,r,F),b(t,k,F),C(k,n,F),b(s,k,F),C(k,a,F),b(i,k,F),C(k,l,F),b(c,k,F),C(k,u,F),b(f,k,F),C(k,d,F),b(g,k,F),C(k,y,F),b($,k,F),C(k,w,F),b(D,k,F),C(k,v,F),b(O,k,F),C(k,X,F),b(G,k,F),C(k,Q,F),b(x,k,F),C(k,lt,F),b(B,k,F),C(k,V,F),b(N,k,F),ft=!0},p:R,i(k){ft||(p(e.$$.fragment,k),p(t.$$.fragment,k),p(s.$$.fragment,k),p(i.$$.fragment,k),p(c.$$.fragment,k),p(f.$$.fragment,k),p(g.$$.fragment,k),p($.$$.fragment,k),p(D.$$.fragment,k),p(O.$$.fragment,k),p(G.$$.fragment,k),p(x.$$.fragment,k),p(B.$$.fragment,k),p(N.$$.fragment,k),ft=!0)},o(k){m(e.$$.fragment,k),m(t.$$.fragment,k),m(s.$$.fragment,k),m(i.$$.fragment,k),m(c.$$.fragment,k),m(f.$$.fragment,k),m(g.$$.fragment,k),m($.$$.fragment,k),m(D.$$.fragment,k),m(O.$$.fragment,k),m(G.$$.fragment,k),m(x.$$.fragment,k),m(B.$$.fragment,k),m(N.$$.fragment,k),ft=!1},d(k){k&&(T(r),T(n),T(a),T(l),T(u),T(d),T(y),T(w),T(v),T(X),T(Q),T(lt),T(V)),h(e,k),h(t,k),h(s,k),h(i,k),h(c,k),h(f,k),h(g,k),h($,k),h(D,k),h(O,k),h(G,k),h(x,k),h(B,k),h(N,k)}}}class br extends H{constructor(e){super(),P(this,e,null,dr,U,{})}}export{br as O};
