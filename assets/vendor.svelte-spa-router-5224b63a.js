import{p as F}from"./vendor.regexparam-4e5cd3ac.js";import{N as K,O as x,S as $,i as ee,s as te,q,c as R,K as D,o as b,L as I,m as w,g as P,P as ne,Q as se,R as re,z as ie,T as oe,U as X,V as E,C as j,D as N,E as S,W as L,X as A,Y as M}from"./vendor.svelte-248e27a6.js";function ae(t){let e,n,i;const u=[t[2]];var f=t[0];function h(r,s){let o={};if(s!==void 0&&s&4)o=L(u,[A(r[2])]);else for(let _=0;_<u.length;_+=1)o=M(o,u[_]);return{props:o}}return f&&(e=E(f,h(t)),e.$on("routeEvent",t[7])),{c(){e&&j(e.$$.fragment),n=q()},m(r,s){e&&N(e,r,s),R(r,n,s),i=!0},p(r,s){if(s&1&&f!==(f=r[0])){if(e){D();const o=e;b(o.$$.fragment,1,0,()=>{S(o,1)}),I()}f?(e=E(f,h(r,s)),e.$on("routeEvent",r[7]),j(e.$$.fragment),w(e.$$.fragment,1),N(e,n.parentNode,n)):e=null}else if(f){const o=s&4?L(u,[A(r[2])]):{};e.$set(o)}},i(r){i||(e&&w(e.$$.fragment,r),i=!0)},o(r){e&&b(e.$$.fragment,r),i=!1},d(r){r&&P(n),e&&S(e,r)}}}function le(t){let e,n,i;const u=[{params:t[1]},t[2]];var f=t[0];function h(r,s){let o={};if(s!==void 0&&s&6)o=L(u,[s&2&&{params:r[1]},s&4&&A(r[2])]);else for(let _=0;_<u.length;_+=1)o=M(o,u[_]);return{props:o}}return f&&(e=E(f,h(t)),e.$on("routeEvent",t[6])),{c(){e&&j(e.$$.fragment),n=q()},m(r,s){e&&N(e,r,s),R(r,n,s),i=!0},p(r,s){if(s&1&&f!==(f=r[0])){if(e){D();const o=e;b(o.$$.fragment,1,0,()=>{S(o,1)}),I()}f?(e=E(f,h(r,s)),e.$on("routeEvent",r[6]),j(e.$$.fragment),w(e.$$.fragment,1),N(e,n.parentNode,n)):e=null}else if(f){const o=s&6?L(u,[s&2&&{params:r[1]},s&4&&A(r[2])]):{};e.$set(o)}},i(r){i||(e&&w(e.$$.fragment,r),i=!0)},o(r){e&&b(e.$$.fragment,r),i=!1},d(r){r&&P(n),e&&S(e,r)}}}function ce(t){let e,n,i,u;const f=[le,ae],h=[];function r(s,o){return s[1]?0:1}return e=r(t),n=h[e]=f[e](t),{c(){n.c(),i=q()},m(s,o){h[e].m(s,o),R(s,i,o),u=!0},p(s,[o]){let _=e;e=r(s),e===_?h[e].p(s,o):(D(),b(h[_],1,1,()=>{h[_]=null}),I(),n=h[e],n?n.p(s,o):(n=h[e]=f[e](s),n.c()),w(n,1),n.m(i.parentNode,i))},i(s){u||(w(n),u=!0)},o(s){b(n),u=!1},d(s){s&&P(i),h[e].d(s)}}}function Y(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let i="";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const O=x(null,function(e){e(Y());const n=()=>{e(Y())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});K(O,t=>t.location);K(O,t=>t.querystring);const U=ie(void 0);function me(t,e){if(e=W(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return H(t,e),{update(n){n=W(n),H(t,n)}}}function ue(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function H(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",i=>{i.preventDefault(),e.disabled||fe(i.currentTarget.getAttribute("href"))})}function W(t){return t&&typeof t=="string"?{href:t}:t||{}}function fe(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function he(t,e,n){let{routes:i={}}=e,{prefix:u=""}=e,{restoreScrollState:f=!1}=e;class h{constructor(a,c){if(!c||typeof c!="function"&&(typeof c!="object"||c._sveltesparouter!==!0))throw Error("Invalid component object");if(!a||typeof a=="string"&&(a.length<1||a.charAt(0)!="/"&&a.charAt(0)!="*")||typeof a=="object"&&!(a instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:m,keys:p}=F(a);this.path=a,typeof c=="object"&&c._sveltesparouter===!0?(this.component=c.component,this.conditions=c.conditions||[],this.userData=c.userData,this.props=c.props||{}):(this.component=()=>Promise.resolve(c),this.conditions=[],this.props={}),this._pattern=m,this._keys=p}match(a){if(u){if(typeof u=="string")if(a.startsWith(u))a=a.substr(u.length)||"/";else return null;else if(u instanceof RegExp){const g=a.match(u);if(g&&g[0])a=a.substr(g[0].length)||"/";else return null}}const c=this._pattern.exec(a);if(c===null)return null;if(this._keys===!1)return c;const m={};let p=0;for(;p<this._keys.length;){try{m[this._keys[p]]=decodeURIComponent(c[p+1]||"")||null}catch{m[this._keys[p]]=null}p++}return m}async checkConditions(a){for(let c=0;c<this.conditions.length;c++)if(!await this.conditions[c](a))return!1;return!0}}const r=[];i instanceof Map?i.forEach((l,a)=>{r.push(new h(a,l))}):Object.keys(i).forEach(l=>{r.push(new h(l,i[l]))});let s=null,o=null,_={};const B=ne();async function y(l,a){await oe(),B(l,a)}let C=null,k=null;f&&(k=l=>{l.state&&(l.state.__svelte_spa_router_scrollY||l.state.__svelte_spa_router_scrollX)?C=l.state:C=null},window.addEventListener("popstate",k),se(()=>{ue(C)}));let T=null,d=null;const G=O.subscribe(async l=>{T=l;let a=0;for(;a<r.length;){const c=r[a].match(l.location);if(!c){a++;continue}const m={route:r[a].path,location:l.location,querystring:l.querystring,userData:r[a].userData,params:c&&typeof c=="object"&&Object.keys(c).length?c:null};if(!await r[a].checkConditions(m)){n(0,s=null),d=null,y("conditionsFailed",m);return}y("routeLoading",Object.assign({},m));const p=r[a].component;if(d!=p){p.loading?(n(0,s=p.loading),d=p,n(1,o=p.loadingParams),n(2,_={}),y("routeLoaded",Object.assign({},m,{component:s,name:s.name,params:o}))):(n(0,s=null),d=null);const g=await p();if(l!=T)return;n(0,s=g&&g.default||g),d=p}c&&typeof c=="object"&&Object.keys(c).length?n(1,o=c):n(1,o=null),n(2,_=r[a].props),y("routeLoaded",Object.assign({},m,{component:s,name:s.name,params:o})).then(()=>{U.set(o)});return}n(0,s=null),d=null,U.set(void 0)});re(()=>{G(),k&&window.removeEventListener("popstate",k)});function J(l){X.call(this,t,l)}function Z(l){X.call(this,t,l)}return t.$$set=l=>{"routes"in l&&n(3,i=l.routes),"prefix"in l&&n(4,u=l.prefix),"restoreScrollState"in l&&n(5,f=l.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=f?"manual":"auto")},[s,o,_,i,u,f,J,Z]}class ge extends ${constructor(e){super(),ee(this,e,he,ce,te,{routes:3,prefix:4,restoreScrollState:5})}}const v=[];let Q;function V(t){const e=t.pattern.test(Q);z(t,t.className,e),z(t,t.inactiveClassName,!e)}function z(t,e,n){(e||"").split(" ").forEach(i=>{i&&(t.node.classList.remove(i),n&&t.node.classList.add(i))})}O.subscribe(t=>{Q=t.location+(t.querystring?"?"+t.querystring:""),v.map(V)});function de(t,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&t.hasAttribute("href")&&(e.path=t.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:n}=typeof e.path=="string"?F(e.path):{pattern:e.path},i={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return v.push(i),V(i),{destroy(){v.splice(v.indexOf(i),1)}}}export{ge as R,de as a,me as l};
